
# Remap E&F "private construction sector" script_values to the unified building type.
# Keep the script_value names used by E&F JE/UI, but point them to building_construction_sector.

REPLACE_OR_CREATE:building_ef_private_construction_lvl_state = {
	value = b:building_construction_sector.level
}

REPLACE_OR_CREATE:building_ef_private_construction_lvl = {
	value = 0
	every_scope_building = {
		limit = {
			is_building_type = building_construction_sector
		}
		add = level
	}
}

# Headroom to the Urban Center-based cap (used by buttons; avoids inline arithmetic in triggers).
REPLACE_OR_CREATE:pcs_construction_sector_headroom_by_base_rate = {
	value = building_urban_center_lvl_by_base_rate
	subtract = building_ef_private_construction_lvl
}

REPLACE_OR_CREATE:building_ef_private_construction_lvl_to_build = {
	value = building_urban_center_lvl
	multiply = {
		value = {
		 	add = 10
		 	subtract = owner.base_rate_percentage_decimal
		}
		divide = 9
	}
	subtract = building_ef_private_construction_lvl

	max = building_urban_center_lvl
	min = 0
	round = yes
}

REPLACE_OR_CREATE:manufacture_stock_product_by_pcs = {
	value = 0
	every_scope_building = {
		limit = {
			is_building_type = building_construction_sector
		}
		add = modifier:goods_output_manufacture_stock_add
	}
}

