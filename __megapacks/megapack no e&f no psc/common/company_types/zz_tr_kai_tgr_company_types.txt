# ComPatch: Tech & Res + Kuromi + TGR
# Keep: TGR company AI setup / flavor usage
# Add: Tech&Res extra building types (new mines/industries)

REPLACE:company_altos_hornos_de_vizcaya = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/basque_altos_hornos_de_vizcaya.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_manufacturing_heavy.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_NEW_CASTILE }

	building_types = {
		building_tooling_workshop
		building_banana_plantation
		building_railway
		# Tech&Res additions
		building_steel_mill
		building_iron_mine
	}

	extension_building_types = {
		# Tech&Res additions
		building_coal_mine
		building_alloys_plant
		building_commonores_mine
	}

	possible_prestige_goods = {
		prestige_good_generic_tools
		prestige_good_gros_michel_banana
		# Tech&Res addition
		prestige_good_generic_steel
	}

	prestige_goods_trigger = {
		custom_tooltip = {
			text = je_prestige_goods_steel_complete_tt
			has_variable = prestige_good_generic_steel_var
		}
	}

	potential = {
		has_interest_marker_in_region = region_iberia
	}

	attainable = {
		hidden_trigger = { # Hide attainable if it's always fulfilled by possible
			any_scope_state = {
				state_region = s:STATE_NEW_CASTILE
			}
		}
	}

	possible = {
		any_scope_state = {
			state_region = s:STATE_NEW_CASTILE
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_tooling_workshop
				level >= 1
			}
		}
	}

	prosperity_modifier = {
		state_infrastructure_mult = 0.1
	}

	ai_will_do = {
		any_scope_state = {
			state_region = s:STATE_NEW_CASTILE
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_tooling_workshop = {
			level = 5
			state_trigger = {
				state_region = s:STATE_NEW_CASTILE
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_east_india_company = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/gb_eic.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_plantation.dds"

	flavored_company = yes

	building_types = {
		building_opium_plantation
		building_coffee_plantation
		building_dye_plantation
		building_rubber_plantation
		building_railway
		# Tech&Res additions
		building_tea_plantation
		building_tobacco_plantation
	}

	extension_building_types = {
		# Tech&Res additions
		building_silk_plantation
		building_sugar_plantation
		building_hydroponic
	}

	possible_prestige_goods = {
		prestige_good_bengal_opium
	}

	potential = {
		c:GBR ?= this
	}

	possible = {
		c:GBR ?= this
	}

	prosperity_modifier = {
		country_convoys_capacity_mult = 0.2
	}

	ai_will_do = {
		c:GBR ?= this
		any_scope_state = {
			state_region = s:STATE_HOME_COUNTIES
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_tea_plantation = {
			level = 5
			state_trigger = {
				OR = {
					region = sr:region_madras
					region = sr:region_bombay
					region = sr:region_bengal
					region = sr:region_central_india
					region = sr:region_punjab
				}
			}
		}
		building_opium_plantation = {
			level = 5
			state_trigger = {
				OR = {
					region = sr:region_madras
					region = sr:region_bombay
					region = sr:region_bengal
					region = sr:region_central_india
					region = sr:region_punjab
				}
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_imperial_arsenal = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/imperial_arsenal.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_harbor_shipbuilding.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_EASTERN_THRACE }

	building_types = {
		building_glassworks
		building_silk_plantation
		building_tobacco_plantation
		building_railway
		# Tech&Res additions
		building_military_shipyard
	}

	extension_building_types = {
		# Tech&Res additions
		building_shipyard
		building_artillery_foundry
	}
	
	possible_prestige_goods = {
		prestige_good_turkish_tobacco
	}

	potential = {
		has_interest_marker_in_region = region_anatolia
	}

	attainable = {
		hidden_trigger = { # Hide attainable if it's always fulfilled by possible
			any_scope_state = {
				state_region = s:STATE_EASTERN_THRACE
			}
		}
	}

	possible = {
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_glassworks
				level >= 1
			}
		}
	}

	prosperity_modifier = {
		unit_navy_defense_mult = 0.10
	}

	ai_will_do = {
		any_scope_state = {
			state_region = s:STATE_EASTERN_THRACE
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_glassworks = {
			level = 5
			state_trigger = {
				state_region = s:STATE_EASTERN_THRACE
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_krupp = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/german_krupp.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_manufacturing_heavy.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_RUHR }

	building_types = {
		building_arms_industry
		building_artillery_foundry
		building_munition_plant
		building_steel_mill
		building_food_industry
		building_glassworks
		building_chemical_plant
		building_railway
	}

	extension_building_types = {
		# Tech&Res additions
		building_iron_mine
		building_commonores_mine
		building_copper_mine
	}

	possible_prestige_goods = {
		prestige_good_krupp_guns
		prestige_good_generic_small_arms
	}

	potential = {
		has_interest_marker_in_region = region_north_germany
	}

	attainable = {
		hidden_trigger = { # Hide attainable if it's always fulfilled by possible
			any_scope_state = {
				state_region = s:STATE_RUHR
			}
		}
	}

	possible = {
		has_technology_researched = steelworking
		any_scope_state = {
			state_region = s:STATE_RUHR
			is_incorporated = yes
			any_scope_building = {
				OR = {
					is_building_type = building_steel_mill
					is_building_type = building_arms_industry
					is_building_type = building_artillery_foundry
				}
				level >= 5
			}
		}
	}

	prosperity_modifier = {
		building_railway_throughput_add = 0.1
		unit_kill_rate_add = 0.1
	}

	ai_will_do = {
		has_technology_researched = steelworking
		any_scope_state = {
			state_region = s:STATE_RUHR
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_steel_mill = {
			level = 5
			state_trigger = {
				state_region = s:STATE_RUHR
			}
		}
		building_arms_industry = {
			level = 5
			state_trigger = {
				state_region = s:STATE_RUHR
			}
		}
		building_artillery_foundry = {
			level = 5
			state_trigger = {
				state_region = s:STATE_RUHR
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_lkab = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/lkab.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_mining.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_NORRLAND }

	building_types = {
		building_iron_mine
		building_lead_mine
		building_motor_industry
		building_logging_camp
		building_fishing_wharf
		building_railway
		# Tech&Res additions
		building_copper_mine
	}

	extension_building_types = {
		# Tech&Res additions
		building_steel_mill
		building_commonores_mine
		building_alloys_plant
		building_bauxite_mine
	}

	possible_prestige_goods = {
		prestige_good_generic_fish
		prestige_good_swedish_bar_iron
	}

	potential = {
		has_interest_marker_in_region = region_baltic
	}

	attainable = {
		hidden_trigger = { # Hide attainable if it's always fulfilled by possible
			any_scope_state = {
				state_region = s:STATE_NORRLAND
			}
		}
	}

	possible = {
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_iron_mine
				level >= 1
			}
		}
	}

	prosperity_modifier = {
		building_iron_mine_throughput_add = 0.2
	}

	ai_will_do = {
		any_scope_state = {
			state_region = s:STATE_NORRLAND
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_iron_mine = {
			level = 1
			state_trigger = {
				state_region = s:STATE_NORRLAND
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_philips = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/philips.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_manufacturing_light.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_HOLLAND STATE_GELRE }

	building_types = {
		building_tooling_workshop
		building_banana_plantation
		building_railway
		# Tech&Res additions
		building_electrics_industry
		building_electronics_industry
		building_battery_plant
	}

	extension_building_types = {
		# Tech&Res additions
		building_power_plant
		building_motor_industry
	}
	
	possible_prestige_goods = {
		prestige_good_gros_michel_banana
	}

	potential = {
		has_interest_marker_in_region = region_rhine
	}

	attainable = {
		hidden_trigger = { # Hide attainable if it's always fulfilled by possible
			any_scope_state = {
				OR = {
					state_region = s:STATE_HOLLAND
					state_region = s:STATE_GELRE
				}
			}
		}
	}

	possible = {
		any_scope_state = {
			is_incorporated = yes
			any_scope_building = {
				is_building_type = building_tooling_workshop
				level >= 1
			}
		}
	}

	prosperity_modifier = {
		country_weekly_innovation_mult = 0.05
		country_weekly_innovation_max_add = 15
	}

	ai_will_do = {
		any_scope_state = {
			OR = {
				state_region = s:STATE_HOLLAND
				state_region = s:STATE_GELRE
			}
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_tooling_workshop = {
			level = 5
			state_trigger = {
				OR = {
					state_region = s:STATE_HOLLAND
					state_region = s:STATE_GELRE
				}
				is_incorporated = yes
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

REPLACE:company_united_fruit = {
	icon = "gfx/interface/icons/company_icons/historical_company_icons/american_united_fruit_co.dds"
	background = "gfx/interface/icons/company_icons/company_backgrounds/comp_illu_plantation.dds"

	flavored_company = yes

	preferred_headquarters = { STATE_MEXICO }

	building_types = {
		building_sugar_plantation
		building_banana_plantation
		building_logging_camp
		building_railway
		# Tech&Res additions
		building_hydroponic
	}

	extension_building_types = {
	}

	possible_prestige_goods = {
		prestige_good_gros_michel_banana
	}

	potential = {
	}

	possible = {
		any_scope_state = {
			OR = {
				state_region = s:STATE_MEXICO
				state_region = s:STATE_YUCATAN
				state_region = s:STATE_GUERRERO
				state_region = s:STATE_JALISCO
				state_region = s:STATE_OAXACA
				state_region = s:STATE_VERACRUZ
			}
			any_scope_building = {
				is_building_type = building_banana_plantation
				level >= 1
			} 
		}
	}

	prosperity_modifier = {
		building_group_bg_plantations_throughput_add = 0.2
		country_infamy_decay_mult = -0.25
	}

	ai_will_do = {
		any_scope_state = {
			state_region = s:STATE_MEXICO
			is_incorporated = yes
		}
	}

	ai_construction_targets = {
		building_banana_plantation = {
			level = 5
			state_trigger = {
				OR = {
					is_in_geographic_region = geographic_region_central_america
					is_in_geographic_region = geographic_region_south_america
				}
			}
		}
	}

	ai_weight = {
		value = 9999 # Higher base value for flavored companies
	}
}

