# Super-block defines: merge TechRes+Kuromi (T&R + KAI) with VC.
# Strategy: VC as base where overlapping, then add missing keys.
# Load order: TechRes+Kuromi -> VC -> vc_tr.

NAI = {
	# VC autonomous investment/trade tuning
	BUILDING_PRIVATIZATION_CHANCE = 1000
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_RANDOM_FACTOR_MULT = 0.0
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_STATE_RANDOM_FACTOR_MULT = 0.0
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_PROFIT_FACTOR_MULT = 2.0
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_CONSTRUCTION_COST_DIVISOR_SCALING = 0.003
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_INDUSTRIAL_GOODS_FACTOR_MULT = 7.0
	PRODUCTION_BUILDING_AUTONOMOUS_INVESTMENT_MILITARY_GOODS_FACTOR_MULT = 7.0
	TREATIES_ACCEPTANCE_WITHDRAW_BINDING_PERIOD_THRESHOLD = -1800

	# KAI additions (keys not present in VC)
	REFORM_GOVERNMENT_STICKINESS = 1.0
	REFORM_GOVERNMENT_PRO_IG_CLOUT_FACTOR = 5.0

	MAX_INSTITUTION_SPENDING_BASE = 0.001
	MAX_INSTITUTION_SPENDING_PER_INSTITUTION = 0.007
	INSTITUTION_SPENDING_DECREASE_SPENDING_RATIO = 1.2

	MONEY_SPENDING_INNOVATION_DESIRED_THRESHOLD = 2.0
	MONEY_SPENDING_INNOVATION_EXCESSIVE_THRESHOLD = 2.5
	MONEY_SPENDING_SUPPLY_NETWORK_CRITICAL_THRESHOLD = 1.0

	GOVERNMENT_BUILDING_STATE_ARMY_NON_ACCEPTED_POP_FACTOR = 250
	GOVERNMENT_BUILDING_STATE_NAVY_NON_ACCEPTED_POP_FACTOR = 250
	GOVERNMENT_BUILDING_STATE_MISSING_QUALIFICATIONS_MULT = 0.6
	GOVERNMENT_BUILDING_STATE_POP_CONSTRUCTION_SECTOR_IMPORTANCE_MULT = 1.0

	PRODUCTION_BUILDING_OUTPUT_HIGH_PRICE_WANTS_HIGH_SUPPLY_FACTOR = 2.0
	PRODUCTION_BUILDING_FAVORED_GOODS_FACTOR = 0.25
	GOVERNMENT_CONSTRUCTION_DOMESTIC_INVESTMENT_BIAS = 10.0

	PRODUCTION_METHOD_BASE_VALUE = 300
	PRODUCTION_METHOD_PRODUCED_VALUE_FACTOR = 0.45
	PRODUCTION_METHOD_EMPLOYMENT_CHANGE_FACTOR = 0.75
	PRODUCTION_METHOD_INCREASE_OUTPUT_PENALTY_FACTOR = 0.95
	PRODUCTION_METHOD_FAVORED_GOODS_FACTOR = 0.05
	PRODUCTION_METHOD_UNDESIRABLE_GOODS_PRICE_FACTOR_UNTRADEABLE = -0.75
	PRODUCTION_METHOD_STICKINESS_UPGRADE = 1.0
}

### TechRes+Kuromi pop growth model (copied from ztr_defines) + VC NPops keys

### Pop Growth Constants
## Base Values per month
@min_birthrate = 0.00160 # Minimum base birthrate per month (at POP_GROWTH_STABLE_SOL)
@max_birthrate = 0.00300 # Maximum base birthrate per month (at SOL = 0)
@min_mortality = 0.00090 # Minimum base mortality per month (at POP_GROWTH_STABLE_SOL)
@max_mortality = 0.00400 # Maximum base mortality per month (at SOL = 0)

## SoL Thresholds
@pop_growth_equilibrium_sol = 5
@pop_growth_transition_sol = 11
@pop_growth_max_sol = 12
@pop_growth_stable_sol = 18

## Others
@transition_birthrate_mult = 1
@max_growth_mortality_mult = 0.35

### Pop Growth Derived values
@birthrate_at_transition = @[max_birthrate*transition_birthrate_mult]
@rate_at_equilibrium = @[pop_growth_equilibrium_sol*((birthrate_at_transition-max_birthrate)/pop_growth_transition_sol)+max_birthrate]

## Mortality from 0 to pop_growth_equilibrium_sol
@mortality_starving_slope = @[(rate_at_equilibrium-max_mortality)/pop_growth_equilibrium_sol]

## Birthrate from 0 to pop_growth_transition_sol
@birthrate_pretransition_slope = @[(birthrate_at_transition-rate_at_equilibrium)/pop_growth_transition_sol]

## Mortality from pop_growth_equilibrium_sol to pop_growth_max_sol
@birthrate_at_growth_max = @[(pop_growth_max_sol-pop_growth_transition_sol)*((min_birthrate-birthrate_at_transition)/(pop_growth_stable_sol-pop_growth_transition_sol))+birthrate_at_transition]
@mortality_at_growth_max = @[birthrate_at_growth_max*max_growth_mortality_mult]
@mortality_equilibrium_to_growth_max_slope = @[(mortality_at_growth_max-rate_at_equilibrium)/(pop_growth_max_sol-pop_growth_equilibrium_sol)]
@mortality_equilibrium_to_growth_max_intercept = @[-mortality_equilibrium_to_growth_max_slope*pop_growth_equilibrium_sol+rate_at_equilibrium]

## Birthrate from pop_growth_transition_sol to pop_growth_stable_sol
@birthrate_transition_slope = @[(min_birthrate-birthrate_at_transition)/(pop_growth_stable_sol-pop_growth_transition_sol)]
@birthrate_transition_intercept = @[-birthrate_transition_slope*pop_growth_stable_sol+min_birthrate]

## Mortality from pop_growth_max_sol to pop_growth_stable_sol
@mortality_growth_max_to_stable_slope = @[(min_mortality-mortality_at_growth_max)/(pop_growth_stable_sol-pop_growth_max_sol)]
@mortality_growth_max_to_stable_intercept = @[-mortality_growth_max_to_stable_slope*pop_growth_stable_sol+min_mortality]

NPops = {
	## Birthrate
	POP_GROWTH_BIRTHRATE_PRETRANSITION_SLOPE = @birthrate_pretransition_slope
	POP_GROWTH_BIRTHRATE_TRANSITION_SLOPE = @birthrate_transition_slope
	POP_GROWTH_BIRTHRATE_TRANSITION_INTERCEPT = @birthrate_transition_intercept

	## Mortality
	POP_GROWTH_MORTALITY_STARVING_SLOPE = @mortality_starving_slope
	POP_GROWTH_MORTALITY_EQUILIBRIUM_TO_GROWTH_MAX_SLOPE = @mortality_equilibrium_to_growth_max_slope
	POP_GROWTH_MORTALITY_EQUILIBRIUM_TO_GROWTH_MAX_INTERCEPT = @mortality_equilibrium_to_growth_max_intercept
	POP_GROWTH_MORTALITY_GROWTH_MAX_TO_STABLE_SLOPE = @mortality_growth_max_to_stable_slope
	POP_GROWTH_MORTALITY_GROWTH_MAX_TO_STABLE_INTERCEPT = @mortality_growth_max_to_stable_intercept

	## Base Values
	POP_GROWTH_MIN_BIRTHRATE = @min_birthrate
	POP_GROWTH_MAX_BIRTHRATE = @max_birthrate
	POP_GROWTH_MIN_MORTALITY = @min_mortality
	POP_GROWTH_MAX_MORTALITY = @max_mortality

	## SoL Thresholds
	POP_GROWTH_EQUILIBRIUM_SOL = @pop_growth_equilibrium_sol
	POP_GROWTH_TRANSITION_SOL = @pop_growth_transition_sol
	POP_GROWTH_MAX_SOL = @pop_growth_max_sol
	POP_GROWTH_STABLE_SOL = @pop_growth_stable_sol

	# VC additions
	WORKING_ADULT_RATIO_BASE = 0.30
	CULTURAL_COMMUNITY_LINGER_TIME_WEEKS = 120
	CULTURAL_COMMUNITY_MAX_PER_MONTH_CHANCE = 0.1

	COLONIZATION_RIGHTS_GROWTH_MULTIPLIER = 3
	COLONIAL_GROWTH_BASE_FACTOR = 0.00003
	MIN_BASE_COLONIAL_GROWTH = 0.025
	MAX_BASE_COLONIAL_GROWTH = 0.15
	MAX_COLONIAL_GROWTH = 0.03
}

